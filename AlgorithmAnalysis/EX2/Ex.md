$$
\begin{cases}
dp[i][0] = \sum_{j\in child[i]}max\{dp[j][1], dp[j][0]\}\\\\
dp[i][1] = \sum_{j\in child[i]}dp[j][0]
\end{cases}
$$



- 原问题等价于求解对于一个整数数组a[i], 寻找一个x, 令$\sum_i |a[i] - x|$最小

- 有推论(*), 对于$a[k] \leq x \leq a[k + 1], Ans(x) = Const$

- 问题规约到 求$max_j\{\sum_i |a[i] - a[j]|\}$

- 且$\sum_i |a[i] - x|\ = (|a[0] - y| + |a[n - 1] - y|) + (|a[1] - y| + a[n - 2] - y) + ...$

- 可知管道的选择应该让两边的油井数量尽量相近, 再结合推论(*), 可知管道应通过中位数位置,或中位数位置两侧的任一个

- 求中位数算法时间复杂度为O(n)

- 核心是快速排序中的子操作, 对于一个数 $t$, 可以O(n)时间内, 使t左边的数均比其小，右边的数均比其大

- 每次这样的操作后, 问题规模平均缩小一半, 计算次数$f(n) = n * (1 + 1 / 2 + 1 / 4 + ...) < 2n$

- 所以可以在O(n)复杂度下求解管道位置

- 最后直接按照公式$\sum_i |a[i] - x|$计算结果

